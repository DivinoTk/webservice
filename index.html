<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Clima em Tempo Real</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>üåç Clima Atual</h1>
  <div id="clima-container">Carregando dados...</div>

  <script>
    async function carregarClima() {
      try {
        const res = await fetch('/weather');
        const data = await res.json();

        const container = document.getElementById('clima-container');
        container.innerHTML = '';

        if (!data.cidades || !Array.isArray(data.cidades)) {
          container.innerHTML = '<p>Erro: dados de clima n√£o dispon√≠veis.</p>';
          console.error('Resposta inesperada da API:', data);
          return;
        }

        data.cidades.forEach(cidade => {
          const div = document.createElement('div');
          div.className = 'cidade';

          if (cidade.erro) {
            div.innerHTML = `<h2>${cidade.cidade}</h2><p>${cidade.erro}</p>`;
          } else {
            div.innerHTML = `
              <h2>${cidade.cidade}</h2>
              <p><strong>Temperatura Atual:</strong> ${cidade.temperaturaAtual}</p>
              <p><strong>M√°xima:</strong> ${cidade.temperaturaMaxima}</p>
              <p><strong>M√≠nima:</strong> ${cidade.temperaturaMinima}</p>
              <p><strong>Vento:</strong> ${cidade.vento}</p>
              <p><strong>Clima:</strong> ${cidade.clima}</p>
              <p><em>Atualizado em: ${cidade.atualizadoEm}</em></p>
            `;
          }

          container.appendChild(div);
        });
      } catch (err) {
        document.getElementById('clima-container').innerHTML = '<p>Erro ao carregar dados do clima.</p>';
        console.error('Erro na requisi√ß√£o:', err);
      }
    }

    carregarClima();
    setInterval(carregarClima, 10000);
  </script>
</body>
</html>